<!doctype html> 

<html>
<head>
    <title>Labyrinthe</title>
    <style>
        body{
            display: flex;
            align-items: center;
            flex-flow: column nowrap;
        }

        .boutons {
            min-width: 250px;
            display: grid;
            grid-template:  "a a a a" 40px
                            "b b c c" 40px
                            "d d d d" 40px
                            "e e e e" 40px
                            "f f g g" 40px;
        }

        .haut{grid-area: a;}
        
        .bas{grid-area: d;}
        
        .gauche{grid-area: b;}
        
        .droite{grid-area: c;}
        
        .restart {grid-area: f;}

        .automatique{grid-area:g;}
        
        button {
            display: flex;
            justify-content: center;
            align-items: center;
        }

    </style>
    <script language="JavaScript">
        m='m'; //représente un mur
        p='p'; //représente le personnage
        b='b'; //représente le chemin
        f="f"; //représente le trophée 

        xperso=1; //position initial du personnage sur l'axe X
        yperso=1; //postition initial du personnage sur l'axe Y
        //tableau à double entrée représentant votre labyrinthe, vous pouvez le modifier pour comprendre le fonctionnement
        var laby = [[m,m,m,m,m,m,m,m,m,m],
                    [m,p,m,b,b,b,b,b,b,m],
                    [m,b,m,b,m,m,m,b,m,m],
                    [m,b,m,b,m,b,m,b,b,m],
                    [m,b,b,b,m,b,m,m,b,m],
                    [m,b,m,b,m,b,b,b,b,f],
                    [m,m,m,m,m,m,m,m,m,m]];
 
        function restart(){
            laby = [[m,m,m,m,m,m,m,m,m,m],
                    [m,p,m,b,b,b,b,b,b,m],
                    [m,b,m,b,m,m,m,b,m,m],
                    [m,b,m,b,m,b,m,b,b,m],
                    [m,b,b,b,m,b,m,m,b,m],
                    [m,b,m,b,m,b,b,b,b,f],
                    [m,m,m,m,m,m,m,m,m,m]];
            afficheLaby()
        }

        function findP(){
            for (let i=0; i<laby.length; i++) {
                if (laby[i].includes(p)) {
                    return [i, laby[i].indexOf(p)]
                }
            }
        }

        function haut(){
            [i, j] = findP()
            if (laby[i-1][j]==f){
                [laby[i-1][j], laby[i][j]] = [laby[i][j], b]
                afficheLaby()
                return
            }else{
                if (laby[i-1][j]==b){
                [laby[i-1][j], laby[i][j]] = [laby[i][j], laby[i-1][j]]
                }
            }
            afficheLaby()
        }

        function bas(){
            [i, j] = findP()
            if (laby[i+1][j]==b){
                [laby[i+1][j], laby[i][j]] = [laby[i][j], laby[i+1][j]]
            }
            afficheLaby()
        }

        function gauche(){
            [i, j] = findP()
            if (laby[i][j-1]==b){
                [laby[i][j-1], laby[i][j]] = [laby[i][j], laby[i][j-1]]
            }
            afficheLaby()
        }

        function droite(){
            [i, j] = findP()
            if (laby[i][j+1]==f){
                [laby[i][j+1], laby[i][j]] = [laby[i][j], b]
                afficheLaby()
                return
            }else{
                if (laby[i][j+1]==b){
                [laby[i][j+1], laby[i][j]] = [laby[i][j], laby[i][j+1]]
                }
            }
            afficheLaby()
        }     
         
        function afficheLaby() //ne rien modifier dans cette fonction
        {
            var leLaby=document.getElementById("laby");
            insertion="<table border=0 cellspacing=0 cellpadding=0>";
         
         
            for(i=0;i<7;i++)
            {
            insertion+="<tr>";
                for(j=0;j<10;j++)
                {
                 
                    if (laby[i][j]==m)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52'height='52' src='Assets/stonewall.png'>";
                    insertion+="</td>";
                    }
                    if (laby[i][j]==p)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52' style='background-image:Assets/Ground.png' src='Assets/Heros.png'>";
                    insertion+="</td>";
                    }
                    if (laby[i][j]==b)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52' src='Assets/Ground.png'>";
                    insertion+="</td>";
                    }

                     
                    if (laby[i][j]==f)
                    {
                    insertion+="<td>";
                    insertion+="<img width='52' height='52'src='Assets/Trophy.png'>";
                    insertion+="</td>";
                    }
                     
             
                     
                }
                insertion+="</tr>";
            }  
             
            insertion+="</table>";
            leLaby.innerHTML=insertion;
        }
         
    </script>
</head>
    <body>
        <div id="laby">
 
        </div>

        <!-- ajouter vos boutons de déplacement ici -->
        <div class="boutons">
            <button class="haut" onclick="haut()">haut</button>
            <button class="bas" onclick="bas()">bas</button>
            <button class="gauche" onclick="gauche()">gauche</button>
            <button class="droite" onclick="droite()">droite</button>
            <button class="restart" onclick="restart()">restart</button>
            <button class="automatique" onclick="automatique()">automatique</button>
        </div>
    
    </body>
    <script>
        afficheLaby()
    </script>
</html>